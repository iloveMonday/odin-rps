<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!--<script type = "text/javascript" src="script.js"></script>-->
    <link rel="stylesheet" href="stylesheet.css" />
    <title>Rock, Paper, Snip!</title>
  </head>
  <body>
    <div class="score" id="scoreboard">SCORE
    <div class="score" id="playerScoreboard">Player: 0</div>
    <div class="score" id="computerScoreboard">Comp: 0</div>
    </div>
    <div class="selection" id="selections">SELECTIONS
    <div class="selection" id="playerSelection">Player: </div>
    <div class="selection" id="computerSelection">Comp: </div>
    </div>
    <div class="winner">Click to Begin!</div>
    
    <button class="button rock">ROCK</button>
    <button class="button paper">PAPER</button>
    <button class="button scissors">SCISSORS</button>

    <div class="end"></div>

    <script>
      let playerScore = 0;
      let computerScore = 0;
      let roundWinner = "";

      function randomSelection() {
        const arr = ["rock", "paper", "scissors"];
        let getNumber = arr[Math.floor(Math.random() * arr.length)];
        return getNumber.toLowerCase();
      }

      function playRound(playerSelection, computerSelection) {
        if (playerSelection === computerSelection) {
          roundWinner = "Draw!";
        } else if (playerSelection === "rock") {
          if (computerSelection === "scissors") {
            playerScore++;
            roundWinner = "Player Wins";
          } else {
            computerScore++;
            roundWinner = "Computer Wins";
          }
        } else if (playerSelection === "scissors") {
          if (computerSelection === "paper") {
            playerScore++;
            roundWinner = "Player Wins";
          } else {
            computerScore++;
            roundWinner = "Computer Wins";
          }
        } else if (playerSelection === "paper") {
          if (computerSelection === "rock") {
            playerScore++;
            roundWinner = "Player Wins";
          } else {
            computerScore++;
            roundWinner = "Computer Wins";
          }
        }
      }

      let rock = document.querySelector(".rock");
      let paper = document.querySelector(".paper");
      let scissors = document.querySelector(".scissors");
      let butt = document.querySelectorAll("button");
      let divWin = document.querySelector(".winner");
      let divEnd = document.querySelector(".end");
      let playerChoice = document.querySelector("#playerSelection");
      let computerChoice = document.querySelector("#computerSelection");
      let playerScoreboard = document.querySelector("#playerScoreboard");
      let computerScoreboard = document.querySelector("#computerScoreboard");

      function whenClicked(playerSelection) {
        if (playerScore === 5 || computerScore === 5) {
          endGame(playerScore, computerScore);
          return;
        }
        let computerSelection = randomSelection();
        playRound(playerSelection, computerSelection);
        updateScores(playerScore, computerScore);
        updateSelections(playerSelection, computerSelection);
        updateRound(roundWinner);
      }

      function updateSelections(playerSelection, computerSelection) {
        playerChoice.textContent = "Player: " + playerSelection;
        computerChoice.textContent = "Comp: " + computerSelection;
      }

      function updateScores(playerScore, computerScore) {
        playerScoreboard.textContent = "Player: " + playerScore;
        computerScoreboard.textContent = "Comp: " + computerScore;
      }

      function updateRound(roundWinner) {
        divWin.textContent = roundWinner;
      }

      function endGame(playerScore, computerScore) {
        if (playerScore === 5) {
          divEnd.textContent = "Player Wins All";
        } else if (computerScore === 5) {
          divEnd.textContent = "Computer Wins All";
        }
        let resetButt = document.createElement("button");
        resetButt.textContent = "Play Again!";
        divEnd.appendChild(resetButt);

        resetButt.addEventListener("click", () => {
          resetGame();
        });
      }

      function resetGame() {
        divEnd.remove();        
        playerScore = 0;
        computerScore = 0;
        playerScoreboard.textContent = "Player: 0";
        computerScoreboard.textContent = "Comp: 0";
        playerChoice.textContent = "Player: ";
        computerChoice.textContent = "Comp: ";
      }

      rock.addEventListener("click", () => {
        whenClicked("rock");
      });
      paper.addEventListener("click", () => {
        whenClicked("paper");
      });
      scissors.addEventListener("click", () => {
        whenClicked("scissors");
      });
    </script>
  </body>
</html>
